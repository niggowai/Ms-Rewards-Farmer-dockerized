version: "3.7"

services:
  dashboard:
    image: selenium/standalone-chrome:latest
    healthcheck:
      test: curl -f http://localhost:4444/session || exit 1
      interval: 60s
      retries: 5
      start_period: 20s
      timeout: 10s
    environment:
      - VNC_NO_PASSWORD=1
    ports:
      - "7900:7900"
    shm_size: 2gb
    volumes:
      - ../html/index.html:/home/seluser/index.html

  dashboard-server:
    image: farmer-dashboard:latest
    depends_on:
      - dashboard
    volumes:
      - ../accounts.json:/accounts.json